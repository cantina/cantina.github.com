<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>node_modules&#x2F;cantina&#x2F;lib&#x2F;cantina.js - Cantina</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="Cantina"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.4.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/app.html">app</a></li>
            
                <li><a href="..&#x2F;classes/app.views.html">app.views</a></li>
            
                <li><a href="..&#x2F;classes/cantina.html">cantina</a></li>
            
                <li><a href="..&#x2F;classes/cantina.cli.html">cantina.cli</a></li>
            
                <li><a href="..&#x2F;classes/cantina.plugins.controllers.html">cantina.plugins.controllers</a></li>
            
                <li><a href="..&#x2F;classes/cantina.plugins.http.html">cantina.plugins.http</a></li>
            
                <li><a href="..&#x2F;classes/cantina.plugins.middleware.html">cantina.plugins.middleware</a></li>
            
                <li><a href="..&#x2F;classes/cantina.plugins.utils.html">cantina.plugins.utils</a></li>
            
                <li><a href="..&#x2F;classes/views.html">views</a></li>
            
                <li><a href="..&#x2F;classes/views.plugin.html">views.plugin</a></li>
            
                <li><a href="..&#x2F;classes/views.plugin.helpers.html">views.plugin.helpers</a></li>
            
                <li><a href="..&#x2F;classes/views.plugin.partials.html">views.plugin.partials</a></li>
            
                <li><a href="..&#x2F;classes/views.plugin.registry.html">views.plugin.registry</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/cantina.html">cantina</a></li>
            
                <li><a href="..&#x2F;modules/views.html">views</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: node_modules&#x2F;cantina&#x2F;lib&#x2F;cantina.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * Cantina Application Framework
 * -----------------------------
 *
 * A framework for building interconnected applications and services.
 *
 * A cantina app&#x2F;service is primarily a flatiron http application.  Cantina
 * extends flatiron to (optionally) use amino as well as providing useful
 * plugins and code structuring conventions.
 *
 * @module cantina
 * @main cantina
 * @exports {Object} The cantina app-creation api.
 * @requires flatiron, path, pkginfo, [amino], [union]
 *&#x2F;

&#x2F;&#x2F; Module dependencies.
var flatiron = require(&#x27;flatiron&#x27;),
    path = require(&#x27;path&#x27;),
    pkginfo = require(&#x27;pkginfo&#x27;),
    _app;

&#x2F;**
 * Cantina API
 * -----------
 *
 * Create applications, attach plugins, and start up services.
 *
 * ###Example:###
 *
 *     var cantina = require(&#x27;cantina&#x27;);
 *
 *     var app = cantina.createApp({
 *       name: &#x27;my-app&#x27;,
 *       version: &#x27;0.1.0&#x27;,
 *       mode: &#x27;http&#x27;,
 *       amino: false,
 *       host: &#x27;localhost&#x27;,
 *       port: 8080
 *     });
 *
 *     app.router.get(&#x27;&#x2F;&#x27;, function() {
 *       this.res.end(&#x27;Hello, world!&#x27;)
 *     });
 *
 *     app.start();
 *
 * @class cantina
 *&#x2F;
var cantina = module.exports = {};

&#x2F;**
 * Lazy-loaded modules in &#x60;lib&#x2F;plugins&#x60; that can be attached to cantina apps.
 *
 * Use like:
 *
 *     app.use(cantina.plugins.controllers, {... options ...});
 *
 * @property plugins
 * @type {Object}
 *&#x2F;
cantina.plugins = flatiron.common.requireDirLazy(path.join(__dirname, &#x27;plugins&#x27;));

&#x2F;**
 * Getter for &#x60;cantina.app&#x60;.
 *
 * Creates an instance of a new application with the default options and caches
 * it for future references.
 *
 * @property app
 * @type {Object}
 *&#x2F;
cantina.__defineGetter__(&#x27;app&#x27;, function () {
  if (!_app) {
    _app = cantina.createApp();
  }
  return _app;
});

&#x2F;**
 * Create a cantina application.
 *
 * @method createApp
 * @param options {Object} Application options and info. Can include:
 *
 *   - &#x60;mode&#x60;   : Either &#x27;cli&#x27; or &#x27;http&#x27;(default).
 *   - &#x60;amino&#x60;  : true(default) or false.
 *   - &#x60;name&#x60;   : A unique name for your application.  Used as the service name
 *                  if this is an amino service.
 *   - &#x60;version&#x60;: Should follow the semver standard.
 *   - &#x60;root&#x60;   : The absolute path to the root directory of the application.
 *                  It can normally be  normally autodiscovered.
 *   - &#x60;...&#x60;    : Other options will be passed through to the http&#x2F;cli plugin.
 *
 * @return {Object} The application object.
 *&#x2F;
cantina.createApp = function(options) {
  var app,
      appPkgInfo = pkginfo.read(module.parent);

  options = options || {};
  app = flatiron.createApp(options);

  &#x2F;&#x2F; Load the utils plugin.
  app.use(cantina.plugins.utils);

  &#x2F;&#x2F; Parse the app info from package.json of the parent module.
  app.info = appPkgInfo.package;

  &#x2F;&#x2F; Default options.
  app.utils.defaults(options, {
    mode: &#x27;http&#x27;,
    amino: true,
    name: app.info.name || &#x27;cantina-app&#x27;,
    version: app.info.version || &#x27;0.0.1&#x27;
  });

  &#x2F;&#x2F; Merge options into app info.
  app.info.name = options.name;
  app.info.version = options.version;

  &#x2F;&#x2F; Set the mode so plugins can react accordingly.
  app.mode = options.mode;

  &#x2F;&#x2F; Set root directory.
  if (options.root) {
    app.root = options.root;
  }
  else {
    app.root = path.dirname(appPkgInfo.dir);
  }

  &#x2F;&#x2F; Mode-specific setup.
  if (app.mode === &#x27;http&#x27;) {
    app.use(cantina.plugins.http, options);
    app.use(cantina.plugins.middleware);
  }
  else if (app.mode === &#x27;cli&#x27;) {
    app.use(flatiron.plugins.cli, options);
  }

  return app;
};

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
